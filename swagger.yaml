swagger: "2.0"
info:
  description: Virtuoso MyMarketing Notification API
  version: 1.0.0
  title: MyMarketing Notifications
  contact:
    email: techappdev@virtuoso.com
host: virtserver.swaggerhub.com
basePath: /cgseattle/Notification/1.0.0
schemes:
- https
paths:
  /login:
    get:
      tags:
      - Login
      summary: Authentication
      description: 'Generate an encrpted token as described by the JavaScript on this fiddle: https://jsfiddle.net/VirtuosoEngineering/xyrzc06n/. Confirm the token generated by the JavaScript matches the token generated by your programming language before proceeding. See https://api.virtuoso.com/documentation for more information.'
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - name: user
        in: query
        description: API user name
        required: true
        type: string
      - name: authToken
        in: query
        description: Encrypted auth token generated as per instructions above
        required: true
        type: string
      responses:
        200:
          description: 'OK: The request was successful, we updated the resource and the response body contains the representation.'
          schema:
            $ref: '#/definitions/LoginResponse'
        400:
          description: Bad request
        401:
          description: Unauthorized
  /notifications:
    post:
      tags:
      - Notification
      summary: Queue a notification
      description: Queues a notification to be sent on sendDate
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: body
        name: body
        description: Notification that needs to be added to the queue
        required: true
        schema:
          $ref: '#/definitions/Notification'
      responses:
        201:
          description: 'OK: The request was successful, we updated the resource and the response body contains the representation.'
          schema:
            $ref: '#/definitions/NotificationResponse'
        400:
          description: Bad request
        401:
          description: Unauthorized
  /consumers:
    post:
      tags:
      - Consumer
      summary: Create a consumer
      description: Create a consumer record
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: body
        name: body
        description: Create a consumer record
        required: true
        schema:
          $ref: '#/definitions/ConsumerCreate'
      responses:
        201:
          description: 'OK: The request was successful, we updated the resource and the response body contains the representation.'
          schema:
            $ref: '#/definitions/ConsumerResponse'
        400:
          description: Bad request
        401:
          description: Unauthorized
  /consumers/{virtuosoId}:
    put:
      tags:
      - Consumer
      summary: Update a consumer
      description: Update a consumer record based on virtuosoId.
      consumes:
      - application/json
      produces:
      - application/json
      parameters:
      - in: path
        name: virtuosoId
        type: number
        format: int64
        required: true
        description: Virtuoso ID for this consumer that was received as part of /consumer POST response
      - in: body
        name: body
        description: Update an existing Consumer record
        required: true
        schema:
          $ref: '#/definitions/ConsumerUpdate'
      responses:
        201:
          description: 'OK: The request was successful, we updated the resource and the response body contains the representation.'
          schema:
            $ref: '#/definitions/ConsumerResponse'
        400:
          description: Bad request
        401:
          description: Unauthorized
definitions:
  Notification:
    type: object
    required:
    - advisorEmail
    - memberNumber
    - campaignName
    - consumerEmails
    - correlationId
    - sendDate
    - templateId
    - token
    properties:
      correlationId:
        type: string
        format: uuid
        example: BB90B7F5-2C61-4ABF-9A70-29976B5C7453
      advisorEmail:
        type: string
        format: email
        example: tim@experttravel.com
      memberNumber:
        type: number
        format: int32
        example: 12345
      consumerEmails:
        type: array
        example:
        - bob@outlook.com
        - lisa@gmail.com
        items:
          type: string
      sendDate:
        type: string
        format: date
        example: 2019-05-29
      templateId:
        type: number
        format: int32
        example: 555.0
      campaignName:
        type: string
        example: 'Consumer Notification: Wanderlist Reminder'
      customData:
        type: array
        items:
          $ref: '#/definitions/CustomData'
      token:
        type: string
        example: ap51e1R1uy7Detf2pzU5ORxQ2O2Az0FRA4ANHDGS2YQIZhtMtJt486ffyEXOn+NNC74+IX1Hv/RB/vsEq9obS2mgyElLljZGBLXYC1lrvX0zB5ICQ/ebUoNPyX+kumCJ4UBAXAZitDkwkwPXClobLr/xjN1lgaqOPYfT9ky3n5N/tSYS5I4aCZexe2reo0ETMdum+ykDjHULWwEWUVYSKBEsG0Ouj6Fpp1GPziWS9qBv7CRF0njhfuyz1PNYJ5iGEXZa7+/VDdjfB8mVVscg7QtFANJE72IiQOyDLc7zmfQAG5niekZqZ1jjBgWMNRMGSFIOUnmwkvAdfGZvfi6KiMu4XBu4J2DSb6j6DMyyLgGpgw4quLWzWdgbnb5RtUbgEzG1d7A/6+bo3X7hTUbi3JCw==
        description: Token to be passed on the next API call.
  CustomData:
    type: object
    required:
    - key
    - value
    properties:
      key:
        type: string
        example: first_name
      value:
        type: string
        example: Bob
  NotificationResponse:
    type: object
    properties:
      serverUtcTime:
        type: string
        format: date-time
        example: 2019-06-02T22:52:55.6486485Z
        description: Server time when this request was executed
      token:
        type: string
        example: apH+qR38Jzevp9KkK65jHEWDH5PSx1nERbRHFnROyNx1eqOubasgex2jLtK/aMfez66jFUVjKLruSCMQ5p6HI7/gY32+BruQYTfjmzKcygUOPNVFcLnC99rCr3tKDRepH/uBVqxZP1C879cuLqj/TKnbYd7jD19wz+VYuAeu0AeNsxjgVZlNtzsN9nBVfoWUXFNHpbRlcw+bS4vbnu04yuPXNjn+X6gGYb7Qv64ieFiLUPOKl6ojBqtbiMksrwecJmSQo/qrU0VRKYh0b28uOoSz8QuXqsKRxgNNiulI1fejk7W6o4gobkDEP1ZeVYMxuQ/pgjnk6DcJLeHozA5EAt9erWHtHjaw3/1Wcpg7Nzz6Ld3H00yyh8cwYhmEvfTMR147onWKQ3wNvStZKaVqEkenIwtZUWz6OtBjzW4MCNzRRg0ouEDrR0h98fDdGbxT8GmVPab3WI18XqIWThVGM8Qw==
        description: Bearer token to be used on the next request if executed within a minute
      status:
        type: number
        format: int32
        example: 201.0
  ConsumerResponse:
    type: object
    properties:
      serverUtcTime:
        type: string
        format: date-time
        example: 2019-06-02T22:52:55.6486485Z
        description: Server time when this request was executed
      token:
        type: string
        example: apH+qR38Jzevp9KkK65jHEWDH5PSx1nERbRHFnROyNx1eqOubasgex2jLtK/aMfez66jFUVjKLruSCMQ5p6HI7/gY32+BruQYTfjmzKcygUOPNVFcLnC99rCr3tKDRepH/uBVqxZP1C879cuLqj/TKnbYd7jD19wz+VYuAeu0AeNsxjgVZlNtzsN9nBVfoWUXFNHpbRlcw+bS4vbnu04yuPXNjn+X6gGYb7Qv64ieFiLUPOKl6ojBqtbiMksrwecJmSQo/qrU0VRKYh0b28uOoSz8QuXqsKRxgNNiulI1fejk7W6o4gobkDEP1ZeVYMxuQ/pgjnk6DcJLeHozA5EAt9erWHtHjaw3/1Wcpg7Nzz6Ld3H00yyh8cwYhmEvfTMR147onWKQ3wNvStZKaVqEkenIwtZUWz6OtBjzW4MCNzRRg0ouEDrR0h98fDdGbxT8GmVPab3WI18XqIWThVGM8Qw==
        description: Bearer token to be used on the next request if executed within a minute
      status:
        type: number
        format: int32
        example: 201.0
      result:
        $ref: '#/definitions/ConsumerResult'
  ConsumerResult:
    type: object
    properties:
      virtuosoId:
        type: number
        format: int64
        example: 1.2345678904293924E16
  ConsumerCreate:
    type: object
    required:
    - advisorEmail
    - memberNumber
    - correlationId
    - email
    - firstName
    - lastName
    - token
    properties:
      correlationId:
        type: string
        format: uuid
        example: BB90B7F5-2C61-4ABF-9A70-29976B5C7453
      firstName:
        type: string
        example: Bob
      lastName:
        type: string
        example: Smith
      email:
        type: string
        format: email
        example: bob.smith@gmail.com
      advisorEmail:
        type: string
        format: email
        example: tim@experttravel.com
      memberNumber:
        type: number
        format: int32
        example: 12345
      token:
        type: string
        example: ap51e1R1uy7Detf2pzU5ORxQ2O2Az0FRA4ANHDGS2YQIZhtMtJt486ffyEXOn+NNC74+IX1Hv/RB/vsEq9obS2mgyElLljZGBLXYC1lrvX0zB5ICQ/ebUoNPyX+kumCJ4UBAXAZitDkwkwPXClobLr/xjN1lgaqOPYfT9ky3n5N/tSYS5I4aCZexe2reo0ETMdum+ykDjHULWwEWUVYSKBEsG0Ouj6Fpp1GPziWS9qBv7CRF0njhfuyz1PNYJ5iGEXZa7+/VDdjfB8mVVscg7QtFANJE72IiQOyDLc7zmfQAG5niekZqZ1jjBgWMNRMGSFIOUnmwkvAdfGZvfi6KiMu4XBu4J2DSb6j6DMyyLgGpgw4quLWzWdgbnb5RtUbgEzG1d7A/6+bo3X7hTUbi3JCw==
        description: Token to be passed on the next API call.
  ConsumerUpdate:
    type: object
    required:
    - correlationId
    - token
    properties:
      correlationId:
        type: string
        format: uuid
        example: BB90B7F5-2C61-4ABF-9A70-29976B5C7453
      firstName:
        type: string
        example: Bob
      lastName:
        type: string
        example: Smith
      email:
        type: string
        format: email
        example: bob.smith@gmail.com
      advisorEmail:
        type: string
        format: email
        example: tim@experttravel.com
      memberNumber:
        type: number
        format: int32
        example: 12345
      status:
        type: string
        default: active
        enum:
        - active
        - inactive
      token:
        type: string
        example: ap51e1R1uy7Detf2pzU5ORxQ2O2Az0FRA4ANHDGS2YQIZhtMtJt486ffyEXOn+NNC74+IX1Hv/RB/vsEq9obS2mgyElLljZGBLXYC1lrvX0zB5ICQ/ebUoNPyX+kumCJ4UBAXAZitDkwkwPXClobLr/xjN1lgaqOPYfT9ky3n5N/tSYS5I4aCZexe2reo0ETMdum+ykDjHULWwEWUVYSKBEsG0Ouj6Fpp1GPziWS9qBv7CRF0njhfuyz1PNYJ5iGEXZa7+/VDdjfB8mVVscg7QtFANJE72IiQOyDLc7zmfQAG5niekZqZ1jjBgWMNRMGSFIOUnmwkvAdfGZvfi6KiMu4XBu4J2DSb6j6DMyyLgGpgw4quLWzWdgbnb5RtUbgEzG1d7A/6+bo3X7hTUbi3JCw==
        description: Token to be passed on the next API call.
  LoginResponse:
    type: object
    properties:
      serverUtcTime:
        type: string
        format: date-time
        example: 2019-06-02T22:52:55.6486485Z
        description: Server time when this request was executed
      status:
        type: number
        format: int32
        example: 201.0
      result:
        $ref: '#/definitions/LoginResult'
  LoginResult:
    type: object
    properties:
      bearerToken:
        type: string
        example: ap51e1R1uy7Detf2pzU5ORxQ2O2Az0FRA4ANHDGS2YQIZhtMtJt486ffyEXOn+NNC74+IX1Hv/RB/vsEq9obS2mgyElLljZGBLXYC1lrvX0zB5ICQ/ebUoNPyX+kumCJ4UBAXAZitDkwkwPXClobLr/xjN1lgaqOPYfT9ky3n5N/tSYS5I4aCZexe2reo0ETMdum+ykDjHULWwEWUVYSKBEsG0Ouj6Fpp1GPziWS9qBv7CRF0njhfuyz1PNYJ5iGEXZa7+/VDdjfB8mVVscg7QtFANJE72IiQOyDLc7zmfQAG5niekZqZ1jjBgWMNRMGSFIOUnmwkvAdfGZvfi6KiMu4XBu4J2DSb6j6DMyyLgGpgw4quLWzWdgbnb5RtUbgEzG1d7A/6+bo3X7hTUbi3JCw==
        description: Token to be passed on the next API call.
